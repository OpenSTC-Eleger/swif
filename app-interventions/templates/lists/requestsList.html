<div class="page-header">
	<h1>
		<%= lang.viewsTitles.requestsList %>


		<% if(user.isDST() || user.isManager()){

		  if(user.isDST()) { 
				var classColor      = requestsState.confirm.color;
				var filterValue     = requestsState.confirm.key;
				var actionToProcess = lang.actions.confirm; 
			}
			else if(user.isManager()){ 
		   		var classColor      = requestsState.wait.color;
		   		var filterValue     = requestsState.wait.key;
		   		var actionToProcess = lang.actions.process; }
			else{ 
		   		var classColor      = '';
		   		var actionToProcess = '';
		   		var filterValue     = ''; 
			}
		%>
		
		<sup id="badgeActions" class="badge badge-<%= classColor %> badge-action" data-filter="<%= filterValue %>" data-toggle="tooltip" data-original-title="<%= actionToProcess %>" data-placement="bottom">
			<%= nbRequestsToDeal %>
		</sup>

		<% } %>

		<sup id="bagdeCpt" class="badge"><%= nbRequests %></sup>
	</h1>
</div>




	<!-- Table toolbar -->
	<div class="tableToolbar row">
		<div class="col-xs-6 col-sm-6 col-md-8 col-xl-9">
			<a href="#" class="btn btn-primary createRequest"><i class="fa fa-plus fa-fw"></i> <%= _.capitalize(lang.actions.addRequest) %></a>
		</div>

		<form class="form-search pull-right col-xs-6 col-sm-6 col-md-4 col-xl-3">
			<div class="input-group">

				<% 
					var fields = [];
					_.each(searchableFields, function(field){
						fields.push(field.label);
					})
				%>
				<input type="search" class="form-control" placeholder="<%= _.toSentence(fields, ', ', ' '+lang.or+' ') %>" autocomplete="off">

				<div class="input-group-btn">
					<!-- Submit Button -->
					<button type="submit" class="btn btn-primary"><i class="fa fa-search fa-lg"></i></button>

					<!-- Button Advance filter -->
					<button type="button" class="btn btn-primary" data-toggle="advance-search">
						<span class="fa fa-search-plus"></span>
					</button>

					<!-- Display saved Filters -->
					<button id="displayRecordFilters" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
						<span class="fa fa-caret-down"></span>
					</button>

					<ul id="savedFilters" class="dropdown-menu pull-right" role="menu"></ul>
				</div>
			</div>
		</form>
	</div>
	<!-- Table toolbar -->


	<!-- Message if No Request to Display -->
	<% if(nbRequests <= 0) { %>
		<div class="tableToolbar">
			<div class="alert alert-warning">
				<i class="fa fa-info-circle fa-lg fa-fw"></i>&nbsp;<%= lang.infoMessages.noRequest %>
			</div>
		</div>
	<% } %>


	<div id="filter-informations" class="tableToolbar hide">
		<div class="alert alert-info">
			<i class="fa fa-filter fa-fw pull-left"></i><p id="filterContent" class="d-inline"><%= lang.activeFilter %>:</strong></p>
			<button type="button" class="btn btn-link btn-xs pull-right unapply-filter"><i class="fa fa-eraser fa-fw"></i> <%= lang.actions.unapplyFilter %></button>
		</div>
	</div>



	<!-- Main view -->
	<div class="row">

		<!-- Advance filter container -->
		<div id="advanceFilterContainer" class="hide content-sidebar content-sidebar-right">
		<div class="panel panel-default">

			<div class="panel-heading">
				<h4 class="panel-title">
					<%= lang.advanceSearch %>
					<a href="#" class="pull-right unapply-filter">
						<i class="fa fa-eraser fa-fw text-muted" data-toggle="tooltip" data-original-title="<%= _.capitalize(lang.actions.unapplyFilter) %>"></i>
					</a>
				</h4>
			</div>

			<div class="panel-body">
				<!-- Advance filter -->
				<div id="advanced-filters-bar"></div>
			</div>
		</div>
		</div>

		
		<div id="contentContainer" class="content-main">
			
			<!-- Table Requests -->
			<div class="table-responsive">
			<table class="table table-striped table-bordered table-hover table-sorter">
				<thead>
					<tr>
						<th data-sort-column="id">NÂ°</th>
						<th data-sort-column="name"><%= _.capitalize(lang.label) %></th>
						<th><%= _.capitalize(lang.place) %>  / <%= _.capitalize(lang.equipment) %></th>
						<th><%= _.capitalize(lang.service) %></th>
						<th><%= _.capitalize(lang.claiment) %></th>
						<th data-sort-column="create_date"><%= _.capitalize(lang.createDate) %></th>
						<th><%= _.capitalize(lang.status) %></th>

						<% if(user.isDST() || user.isManager()){ %>
							<th class="actions"><%= _.capitalize(lang.action) %></th>
						<% } %>
					</tr>
				</thead>
				<tbody id="rows-items">

				</tbody>

			</table>
			</div>
			<!-- /Table Requests -->

			<!-- Table pagination -->
			<div id="pagination" class="pull-right"></div>
			<!-- /Table pagination -->

		</div>

	</div>
	<!-- /Main view -->




<!-- Modal form to add a request -->
<div id="modalRequest" class="modal fade" role="dialog" aria-hidden="true"></div>