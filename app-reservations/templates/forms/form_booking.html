<div class="page-header">
	<h1>
		<%= lang.viewsTitles.newBooking %>
	</h1>
</div>

	
<form id="formSaveBooking" action="#" class="form-horizontal container" role="form">
	<div class="row">
		<fieldset class="col-sm-6" <%= readonly ? 'disabled' : ''%>>
		<legend>Informations Générales</legend>
			<!-- Citizen BS-switch -->
			<div class="form-group">
				<label for="bookingIsCitizen" class="control-label col-sm-3"><%= _.capitalize(lang.citizen) %>:</label>
		
				<div class="make-switch" id="bookingIsCitizen" data-on-label="<%= lang.yes %>" data-off-label="<%= lang.no %>" tabindex="0">
					<input id="isCitizen" type="checkbox"
		
						<% if(!_.isNull(booking.getId())){ if(booking.fromCitizen()) { %> checked <% } } %>
					>
				</div>
			</div>
			
			<!-- Booking Partner (claimer) -->
			<div class="form-group">
				<label for="bookingPartner" class="control-label col-sm-3"><%= _.capitalize(lang.claiment) %>:</label>
	
				<div class="col-sm-9">
					<input id="bookingPartner" class="select2" data-placeholder="<%= lang.actions.selectAClaimer %>"
	
						<% if(!_.isNull(booking.getId())){
							if(!_.isUndefined(booking.getClaimer('id'))) { %>
							data-selected-value='<%= JSON.stringify(booking.getClaimer('json')) %>'
						<% } } %> <%= readonly ? 'disabled' : ''%>
					/>
				</div>
			</div>

			<!-- Booking Contact (contact of claimer) -->
			<div class="form-group" id="blockBookingContact">
				<label for="bookingContact" class="control-label col-sm-3"><%= _.capitalize(lang.contact) %>:</label>
	
				<div class="col-sm-9">
					<input id="bookingContact" class="select2" data-placeholder="<%= lang.actions.selectAContact %>"
	
						<% if(!_.isNull(booking.getId())){
							if(!_.isUndefined(booking.getClaimerContact('id'))) { %>
							data-selected-value='<%= JSON.stringify(booking.getClaimerContact('json')) %>'
						<% } } %> <%= readonly ? 'disabled' : ''%>
	
					/>
				</div>
			</div>
			<!-- Citizen infos -->
			<div id="citizenInfos">
				<div class="form-group">
					<label for="bookingPeopleName" class="control-label col-sm-3"><%= _.capitalize(lang.name) %>:</label>
					<div class="col-sm-9">
						<input type="text" id="bookingPeopleName" name="peopleName" class="form-control" value="<%= booking.getCitizenName()%>"/>
					</div>	
				</div>
				<div class="form-group">
					<label for="bookingPeoplePhone" class="control-label col-sm-3"><%= _.capitalize(lang.phone) %>:</label>
					<div class="col-sm-9">
						<input type="text" id="bookingPeoplePhone" name="peoplePhone" class="form-control" value="<%= booking.getCitizenPhone()%>"/>
					</div>	
				</div>
				<div class="form-group">
					<label for="bookingPeopleMail" class="control-label col-sm-3"><%= _.capitalize(lang.email) %>:</label>
					<div class="col-sm-9">
						<input type="text" id="bookingPeopleMail" name="peopleMail" class="form-control" value="<%= booking.getClaimerMail()%>"/>
					</div>	
				</div>
			</div>

			<!-- booking name -->
			<div class="form-group">
				<label for="bookingName" class="control-label col-sm-3"><%= _.capitalize(lang.label) %>:</label>
				<div class="col-sm-9">
					<input type="text" id="bookingName" name="bookingName" class="form-control" required="required" value="<%= booking.getName()%>"/>
				</div>				
			</div>
			
			<!-- booking checkin -->
			<div class="form-group">
				<label for="bookingCheckin" class="control-label col-sm-3"><%= _.capitalize(lang.dateStart) %>:</label>
				<!-- checkin date -->
				<div class="input-group col-sm-4">
					<input type="text" class="datepicker form-control" id="bookingCheckin" value="<%= startDate%>" placeholder="dd/mm/yyyy" required="required">
					<span class="input-group-addon"><i class="fa fa-calendar"></i></span>
				</div>

				<!-- checkin hour -->
				<div class="input-group bootstrap-timepicker col-sm-3" >							
					<input type="text" class="timepicker-default form-control" id='bookingCheckinHour' value="<%= startHour%>" required="required">
					<span class="input-group-addon"><i class="fa fa-clock-o"></i></span>
				</div>						
			</div>
			
			<!-- booking checkout -->
			<div class="form-group">
				<label for="bookingCheckout" class="control-label col-sm-3"><%= _.capitalize(lang.dateEnd) %>:</label>
				<!-- checkout date -->
				<div class="input-group col-sm-4">
					<input type="text" class="datepicker form-control" id="bookingCheckout" value="<%= endDate%>" placeholder="dd/mm/yyyy" required="required">
					<span class="input-group-addon"><i class="fa fa-calendar"></i></span>
				</div>

				<!-- checkout hour -->
				<div class="input-group bootstrap-timepicker col-sm-3" >							
					<input type="text" class="timepicker-default form-control" id='bookingCheckoutHour' value="<%= endHour%>" required="required">
					<span class="input-group-addon"><i class="fa fa-clock-o"></i></span>
				</div>						
			</div>
			<div class="form-group">
				<label for="bookingAddBookable" class="control-label col-sm-3"><%= _.capitalize(lang.resa.recurrenteBooking) %>:</label>
		
				<div class="make-switch" id="bookingAddRecurrence" data-on-label="<%= lang.yes %>" data-off-label="<%= lang.no %>" tabindex="0">
					<input id="addRecurrence" type="checkbox"
		
						<% if(!_.isNull(booking.getId())){ if(booking.getRecurrence()) { %> checked <% } } %>
					>
				</div>
			</div>
		</fieldset>
		<!-- Bookables (qty, pricing, dispo)-->
		<fieldset class="col-sm-6" <%= readonly ? 'disabled' : ''%>>
		<legend>Ressources demandées</legend>
			<!-- Recap of BookingLines -->
			<table class="table-nested-objects table table-striped table-condensed table-hover">
				<thead>
				<tr>
					<th class="row-sm-3"><%= _.capitalize(lang.picture) %></th>
					<th class="row-sm-3"><%= _.capitalize(lang.bookable) %></th>
					<th class="row-sm-2"><%= _.capitalize(lang.quantity) %></th>
					<th class="row-sm-1"><%= _.capitalize(lang.availability) %></th>
					<th class="row-sm-3"><%= _.capitalize(lang.price) %></th>
				</tr>
				</thead>
				<tbody id="bookingLines">
				
				</tbody>
			</table>
			<!-- Add a bookable -->
			<div class="form-group">
				<label for="bookingAddBookable" class="control-label col-sm-3"><%= _.capitalize(lang.resa.actions.addABookable) %>:</label>
	
				<div class="col-sm-9">
					<input id="bookingAddBookable" class="select2" data-placeholder="<%= lang.actions.selectABookable %>"/>
				</div>
			</div>
		</fieldset>
	</div>

	<div class="row">
		<!-- recurrence-->
		<div id="recurrence">
			
		</div>
	</div>
	<hr/>
	<div class="row">
		<div class="col-sm-2 col-sm-offset-4">
			<div class="pull-right">
				<button type="submit" class="btn btn-primary" form="formSaveBooking" id="saveFormBooking"><%= lang.actions.validate%></button>
				<a href="#app-reservations/reservations" aria-hidden="true"><%= _.capitalize(lang.actions.cancel) %></a>
			</div>
		</div>
	</div>
</form>
