<div class="page-header">
	<h1><%= lang.viewsTitles.planning %></h1>
</div>




<!-- Interventions List -->
<div class="row-fluid">


 	<!-- Left Column -->
 	



	<!-- Interventions toolbar -->

	<!-- /Interventions toolbar -->

	<!-- Interventions List -->
	<div id="planningInters" class="span3"></div>

  


	<!-- Right Column -->
	<div class="span9">


		<!-- List Officer/Teams -->
		<div id="listAgentsTeams">
			<ul class="nav nav-tabs" id="allTabs">
				<li class="active">
					<a href="#" data-target="#tab-agents" data-toggle="tab" class="no-outline">
						<%= _.capitalize(lang.agents) %> &nbsp;<span class="badge"><%= _.size(officers) %></span>
					</a>
				</li>
				<li>
					<a href="#" data-target="#tab-teams" data-toggle="tab" class="no-outline">
						<%= _.capitalize(lang.teams) %> &nbsp;<span class="badge"><%= _.size(teams) %></span>
					</a>
				</li>
			</ul>

			<div class="tab-content">
				
				<!-- Officers -->
				<div class="tab-pane active" id="tab-agents">
					<ul id="listAgents" class="unstyled inline nav nav-list">
						<%_.each(officers, function (officer, i) { console.log(officer); %>
							<li>
								<a id="pOfficer_<%= officer.id %>" href="#planning/officer/<%= _.slugify(officer.name).toUpperCase()%>">
									<i class="icon-user"></i><%= (officer.firstname != false ? officer.firstname : '') %> &nbsp;<%= officer.name.toUpperCase() %>
								</a>
							</li>
						<% }) %>
					</ul>
				</div>

				<!-- Teams -->
				<div class="tab-pane" id="tab-teams">
					<ul id="listTeams" class="unstyled inline nav nav-list">
						<% _.each(teams, function (team, i) {

							var teamMembers = "<li><i class='icon-asterisk'></i> "+ team.manager_id[1] +"</li>";

							_.each(team.members, function(teamMember){
								teamMembers += "<li><i class='icon-user'></i>&nbsp;"+ (teamMember.firstname != false ? teamMember.firstname.replace(' ', '&nbsp;') : '') +"&nbsp;"+ teamMember.name.toUpperCase().replace(' ', '&nbsp;') +"</li>"
							});
						%>

							<li rel="popover" data-original-title="<%= _.capitalize(lang.agents) %>" data-content="<ul class='unstyled'><%= teamMembers %></ul>" data-html="true" data-placement="left">
								<a id="pTeam_<%= team.id %>" href="#planning/team/<%= _.slugify(team.name).toUpperCase()%>">
									<i class="icon-group"></i><%= team.name %>
								</a>
							</li>
						<% }) %>
					</ul>
				</div>


		  	</div>
		</div>
		<!-- /List Officer/Teams -->


		<!-- Calendar -->
		<div id="calendarsContainer" style="overflow: hidden; max-height: 590px;">
			<div id="calendar"></div>
		</div>
		<!-- /Calendar -->


	</div>

</div>




<!-- Modal Form Absent Task -->
<div id="modalAbsentTask" class="modal hide fade">
	<div class="modal-header">
	    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	    <h3><%= lang.viewsTitles.newAbsent %></h3>
	</div>
	
	<div class="modal-body">

		<blockquote id="infoModalAbsentTask" class="spaceBottom">
			<p></p>
			<small></small>
		</blockquote>

	    <form id="formAbsentTask" action="#" class="form-horizontal">


	    	<!-- Absent Type -->
	    	<div class="control-group">
				<label for="absentType" class="control-label"><%= _.capitalize(lang.type) %>:</label>

				<div class="controls">
					<select id="absentType" required="required"></select>
					<span class="help-inline"></span>
				</div>
			</div>


            <!-- Absent start date / hour -->
            <div class="control-group">
				<label class="control-label" for="startDate"><%= _.capitalize(lang.dateStart) %>:</label>
				<div class="control-group">

					<div class="controls">
						<!-- Start date -->
						<div class="input-append">
							<input  type="text" class="datepicker input-small" id="startDate" value="" required="required">
							<span class="add-on"><i class="icon-calendar"></i></span>
						</div>
	                	
						<!-- Start Hour -->
						<div class="input-append bootstrap-timepicker" >							
							    <input type="text" class="timepicker-default input-mini" id='startHour' required="required">
							    <span class="add-on"><i class="icon-time"></i></span>
						</div>
					</div>

				</div>
			</div>
            

			<!-- Absent end date / hour -->
            <div class="control-group">
                <label class="control-label" for="endDate"><%= _.capitalize(lang.dateEnd) %>:</label>
                <div class="control-group">

	                <div class="controls">
	            		<!-- End Date -->
	            		<div class="input-append">
	                        <input type="text" class="datepicker input-small" id="endDate" value=""  placeholder="dd/mm/yyyy" required="required">
	                    	<span class="add-on"><i class="icon-calendar"></i></span>
	                    </div>

	                    <!-- End Hour -->
	                    <div class="input-append bootstrap-timepicker" >							
						    <input type="text" class="timepicker-default input-mini" id='endHour' required="required">
						    <span class="add-on"><i class="icon-time"></i></span>
						</div>
	                </div>

            	</div>
            </div>
          
	    </form>
	</div>
	
	<div class="modal-footer">
	    <button type="submit" form="formAbsentTask" class="btn btn-primary okButton" id="okButton"><%= _.capitalize(lang.actions.save) %></button>&nbsp;&nbsp;
	    <a href="#" data-dismiss="modal" class='dismiss'><%= _.capitalize(lang.actions.cancel) %></a>
	</div>
</div>


<!-- Modal Form Cancel Intervention -->
<div id="modalCancelInter" class="modal hide fade">
	<div class="modal-header">
	    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	    <h3><%= lang.viewsTitles.cancelIntervention %></h3>
	</div>
	
	<div class="modal-body">

		<blockquote id="infoModalCancelInter" class="spaceBottom">
			<p></p>
			<small></small>
		</blockquote>

	    <form id="formCancelInter" action="#" class="form-horizontal">

			<!-- Intervention refusal reason -->
            <div class="control-group">
                <label for="motifCancel" class="control-label"><%= _.capitalize(lang.reason) %>:</label>

                <div class="controls">
                    <textarea id="motifCancel" rows="5" required="required"></textarea>
                    <span class="help-inline"></span>
                </div>
            </div>
	    </form>
	</div>
	
	<div class="modal-footer">
	    <button type="submit" form="formCancelInter" class="btn btn-primary"><%= _.capitalize(lang.actions.save) %></button>&nbsp;&nbsp;
	    <a href="#" data-dismiss="modal"><%= _.capitalize(lang.actions.cancel) %></a>
	</div>
</div>



<!-- Modal Form Delete Task -->
<div id="modalDeleteTask" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3><%= lang.viewsTitles.deleteTask %></h3>
	</div>
	
	<div class="modal-body">

		<blockquote id="infoModalDeleteTask" class="spaceBottom">
			<p></p>
			<small></small>
		</blockquote>

		<p><%= lang.warningMessages.confirmDeleteTask %></p>
	</div>
	
	<div class="modal-footer">
	    <button type="button" class="btn btn-danger btnDeleteTask"><%= _.capitalize(lang.actions.delete) %></button>&nbsp;&nbsp;
	    <a href="#" data-dismiss="modal"><%= _.capitalize(lang.actions.cancel) %></a>
	</div>
</div>



<!-- Form to add a new Task -->
<div id="modalAddTask" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3><%= _.capitalize(lang.actions.addTask) %></h3>
	</div>

	<div class="modal-body">
		<form id="formAddTask" action="#" class="form-horizontal">

			<!-- Task name -->
			<div class="control-group">
				<label for="taskName" class="control-label"><%= _.capitalize(lang.label) %>:</label>

				<div class="controls">
					<input type="text" id="taskName" name="taskName" required="required"/>
					<span class="help-inline"></span>
				</div>
			</div>

			<!-- Task hour -->
			<div class="control-group">
				<label for="taskHour" class="control-label"><%= _.capitalize(lang.estimatedHours) %>:</label>

				<div class="controls">
					<div class="input-append bootstrap-timepicker" >							
						<input type="text" value="01:00" class="timepicker-default input-mini" id='taskHour' required="required">
						<span class="add-on"><i class="icon-time"></i></span>
					</div>
				</div>
			</div>

			<!-- Task Category -->
			<div class="control-group">
				<label for="taskCategory" class="control-label"><%= _.capitalize(lang.category) %>:</label>

				<div class="controls">
					<select id="taskCategory"></select>
					<span class="help-inline"></span>
				</div>
			</div>

	    </form>
	</div>
	
	<div class="modal-footer">
	    <button type="submit" form="formAddTask" class="btn btn-primary"><%= _.capitalize(lang.actions.save) %></button>&nbsp;&nbsp;
	    <a href="#" data-dismiss="modal"><%= _.capitalize(lang.actions.cancel) %></a>
	</div>
</div>


<!-- Form to add a new Intervention -->
<div id="modalAddInter" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3><%= _.capitalize(lang.actions.addIntervention) %></h3>
	</div>
	
	<div class="modal-body">
		<form id="formAddIntervention" action="#" class="form-horizontal">

				<!-- intervention Name -->
				<div class="control-group">
					<label for="interventionName" class="control-label"><%= _.capitalize(lang.label) %>:</label>

					<div class="controls">
					    <input type="text" id="interventionName" name="interventionName" required="required" />
					    <span class="help-inline"></span>
					</div>
                    
                    <div class="controls">
						<label for="isTemplate" class="checkbox"><%= _.capitalize(lang.template) %>
							<input type="checkbox" id="isTemplate" />
						</label>
					</div>
                </div>
                
                <!-- intervention Description -->
                <div class="control-group">
                    <label for="interventionDescription" class="control-label"><%= _.capitalize(lang.description) %>:</label>

                    <div class="controls">
                        <textarea name="interventionDescription" id="interventionDescription" rows="5" required="required"></textarea>
                        <span class="help-inline"></span>
                    </div>
                </div>
                
                <!-- intervention Contact Service -->
                <div class="control-group">
                    <label for="interventionDetailService" class="control-label"><%= lang.serviceConcerned %>:</label>

                    <div class="controls">
                        <select id="interventionDetailService"></select>
                        <span class="help-inline"></span>
                    </div>
                </div>
                
                <!-- intervention Place -->
                <div class="control-group">
                    <label for="interventionPlace" class="control-label"><%= _.capitalize(lang.place) %>:</label>

                    <div class="controls">  
                        <select id="interventionPlace"><option value="" disabled="disabled" ></option></select>
                        <span class="help-inline"></span>                           
                    </div>
                </div>
                
                <!-- intervention Place precision -->
                <div class="control-group">
                    <label for="interventionPlacePrecision" class="control-label"><%= _.capitalize(lang.informationOfTheSite) %>:</label>

                    <div class="controls">  
                         <textarea name="interventionPlacePrecision" id="interventionPlacePrecision" rows="2"></textarea>
                        <span class="help-inline"></span>                           
                    </div>
                </div>

	    </form>
	</div>
	
	<div class="modal-footer">
	    <button type="submit" form="formAddIntervention" class="btn btn-primary"><%= _.capitalize(lang.actions.save) %></button>&nbsp;&nbsp;
	    <a href="#" data-dismiss="modal"><%= _.capitalize(lang.actions.cancel) %></a>
	</div>
</div>
<div id="printingCalendar"></div>
