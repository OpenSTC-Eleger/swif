<div class="page-header">
	<h1>
		<%= lang.viewsTitles.interventionsMonitoring %>
		<sup class="badge badge-info" id="nbInterPlanned" data-toggle="tooltip" data-original-title="<%= lang.planningFenced %>" data-placement="bottom">
			<%= nbInterventionsPlanned %>
		</sup>

		<sup class="badge" id="nbInterPending" data-toggle="tooltip" data-original-title="<%= lang.pending %>" data-placement="bottom">
			<%= nbInterventionsPending %>
		</sup>
	</h1>
</div>


<div class="container-fluid">

	<!-- Message if No intervention to Display -->
	<% if(interventions.length <= 0) { %>
		<div class="tableToolbar">
			<div class="alert alert-info">
				<i class="icon-info-sign icon-large"></i>&nbsp;<%= lang.infoMessages.noRequest %>
			</div>
		</div>
	<% } %>


	<!-- Table toolbar -->
	<div class="tableToolbar">
		<!--<a href="#<%= app.routes.addIntervention.url %>" class="btn btn-primary"><i class="icon-plus"></i> <%= _.capitalize(lang.actions.addIntervention) %></a>-->	
		<a href="#" class="btn btn-primary modalCreateInter"><i class="icon-plus"></i> <%= _.capitalize(lang.actions.addIntervention) %></a>
		<form class="form-search pull-right">
			<div class="input-append">
				<input type="search" class="input-medium search-query" placeholder="<%= lang.actions.search %>..." autocomplete="off">
				<button type="submit" disabled class="btn disabled"><i class="icon-search icon-large"></i></button>
			</div>
		</form>
	</div>
	<!-- /Table toolbar -->


	<!-- Table Interventions -->
	<table class="table-interventions table table-bordered table-hover table-sorter table-striped">
		<thead>
			<tr>
				<th data-sort-column="id">NÂ°</th>
				<th data-sort-column="name"><%= _.capitalize(lang.label) %></th>
				<th><%= _.capitalize(lang.place) %></th>
				<th><%= _.capitalize(lang.dateDeadline) %></th>
				<th><%= _.capitalize(lang.plannedHours) %></th>
				<th><%= _.capitalize(lang.spentHours) %></th>
				<th class="span3"><%= _.capitalize(lang.progressRate) %>
					<!-- Status Filter -->
					<div class="dropdown pull-right">
						<a id="filterStateInter" class="dropdown-toggle filter-button" data-toggle="dropdown" href="#"><i class="icon-filter icon-large"></i></a>

						<ul id="filterStateInterList" class="dropdown-menu" role="menu" aria-labelledby="filterStateInter">
							<% _.each(interventionsState, function (state, i) {
								if(i == app.Models.Intervention.status.template.key){ %>
									<li class="divider"></li>
							<% } %>
								
								<li role="menuitem">
									<a tabindex="-1" href="#<%= state.key %>"> 
										<i class="badge badge-<%= state.color %>">&nbsp;</i>
										&nbsp; <%= _.capitalize(state.translation) %>
									</a>
								</li>

							<% }) %>

								<li role="menuitem">
									<a href="#overrun"><i class="badge badge-overrun">&nbsp;</i>
										&nbsp; <%= _.capitalize(lang.overrun) %>
									</a>
								</li>
								<li class="divider"></li>
								<li class="delete-filter disabled"><a href="#delete-filter"> <i class="icon-remove"></i> <%= _.capitalize(lang.deleteFilter) %></a></li>
						</ul>
					</div>
				</th>
			</tr>
		</thead>
		
		<tbody id="inter-items">
		<!-- Inter rows -->
		
		</tbody>
	</table>

	<!-- Table pagination -->
	<div class="pagination pagination-right">
		<ul>
			<!-- First page button -->
			<% if(page-2 >= 1){ %>
				<li <%= ((page - 1) == 0 ? " class='disabled'" : "")%>><a href='#<%= app.routes.interventions.baseUrl %>/page<%= 1 %>'><%= _.capitalize(lang.actions.first) %></a></li>
			<% } %>
			
			<!-- Previous page button -->
			<li <%= ((page - 1) == 0 ? " class='disabled'" : "")%>><a href='#<%= app.routes.interventions.baseUrl %>/page<%=(page-1)%>'><%= _.capitalize(lang.actions.previousShort) %></a></li>
		
			<!-- [...] page Button -->
			<% 	if (page-2 > 1) { %>
					<li class="disabled"><a href='#'>...</a></li>
			<% } 
					
				for (var i=(page-2); i < (page+3); i++) {
					if(i >= 1 && i <= pageCount){ %>
						<li <%= (i === page ? " class='active'" : "")%>><a href='#<%= app.routes.interventions.baseUrl %>/page<%=i%>'><%= i %></a></li>
					<% }

				} %>
				
			<!-- [...] page Button -->
			<% if (page+2 < pageCount) { %>
				<li class="disabled"><a href='#'>...</a></li>
			<% } %>
			
			<!-- Next page button -->
			<li <%= ((page + 1) > pageCount ? " class='disabled'" : "")%>><a href='#<%= app.routes.interventions.baseUrl %>/page<%=(page+1)%>'><%= _.capitalize(lang.actions.nextShort) %></a></li>
			
			<!-- Last page button -->
			<% if(page+2 <= pageCount){ %>
				<li <%= ((page + 1) > pageCount ? " class='disabled'" : "")%>><a href='#<%= app.routes.interventions.baseUrl %>/page<%= pageCount %>'><%= _.capitalize(lang.actions.end) %></a></li>
			<% } %>
		</ul>
	</div>
	<!-- /Table pagination -->

</div>

<!-- Modal Form to add a new Task to Inter -->
<div id="modalAddTask" class="modal hide fade"></div>

<!-- Modal Form Delete Task -->
<div id="modalDeleteTask" class="modal hide fade"></div>

<!-- Modal Form Cancel Intervention -->
<div id="modalCancelInter" class="modal hide fade"></div>

<!-- Modal Form Task Done -->
<div id="modalTaskDone" class="modal hide fade"></div>

<!-- Modal Form Cancel Task -->
<div id="modalCancelTask" class="modal hide fade"></div>


<!-- Form to print paperboard-->
<div id="printTask" class="hide container-fluid printContainer" >

		<div>
		<div>
			<h1 style="float: left;">Fiche d'interventions</h1>
   			<img src="css/images/administration_logo.png" style="float: right" />
   		</div>
   		<hr style="clear: both;">



		<fieldset style="font-size: 20px; margin-bottom: 30px; padding-top: 20px;">
			<legend><strong><%= lang.aboutTheIntervention %>:</strong></legend>
			<p id="interService" class="field" style="float: right; margin: 0;"></p><br />
			<p style="float: right; margin: 0">
				<strong id="interDateCreate" class="field"></strong>
				<strong id="interDeadline" class="field"></strong>
			</p>
			<div style="clear: both;">
				<em style="text-decoration:underline;"><%= _.capitalize(lang.intervention) %>:</em> <span id="interName" class="field"></span><br />
				<em style="text-decoration:underline;"><%= _.capitalize(lang.description) %>:</em> <span id="interDescription" class="field"></span><br />
				<em style="text-decoration:underline;"><%= _.capitalize(lang.place) %>:</em> <span id="interPlace" class="field"></span><br />
				<em style="text-decoration:underline;"><%= _.capitalize(lang.informationOfTheSite) %>:</em> <span id="interPlaceMore" class="field"></span><br />
			</div>

			<fieldset style="font-size: 20px; margin-top: 30px;">
				<legend><strong><%= lang.claimerDetails %>:</strong></legend>

				<em style="text-decoration:underline;"><%= _.capitalize(lang.claiment) %>:</em> <span id="claimentName" class="field"></span><br />
				<em style="text-decoration:underline;"><%= _.capitalize(lang.type) %>:</em> <span id="claimentType" class="field"></span><br />
				<em style="text-decoration:underline;"><%= _.capitalize(lang.phone) %>:</em> <span id="claimentPhone" class="field"></span><br />
			</fieldset>

		</fieldset>
		


		<div class="forTask">
			<fieldset style="font-size: 20px;">
				<legend><strong><%= lang.aboutTheTask %>:</strong></legend>

				<table style="width: 100%;">
					<tr style="height: 50px;">
						<td><strong><%= _.capitalize(lang.label) %>:</strong></td>
						<td style="width: 80%" id="taskLabel"></td>
					</tr>
					<tr style="height: 50px;">
						<td><strong><%= _.capitalize(lang.estimatedHours) %>:</strong></td>
						<td style="width: 80%" id="taskPlannedHour"></td>
					</tr>
					<tr style="height: 50px;">
						<td><strong><%= _.capitalize(lang.carryOutBy) %>:</strong></td>
						<td class="toFill" style="width: 80%"></td>
					</tr>
					<tr style="height: 50px;">
						<td><strong><%= _.capitalize(lang.dateHourStart) %>:</strong></td>
						<td class="toFill" style="width: 80%"></td>
					</tr>
					<tr style="height: 50px;">
						<td><strong><%= _.capitalize(lang.dateHourEnd) %>:</strong></td>
						<td class="toFill" style="width: 80%"></td>
					</tr>
					<tr style="height: 80px;">
						<td><strong><%= _.capitalize(lang.vehiclesOrEquipments) %>:</strong></td>
						<td class="toFill" style="width: 80%"></td>
					</tr>
					<tr style="height: 50px;">
						<td><strong><%= _.capitalize(lang.oil) %> / <%= _.capitalize(lang.price) %>:</strong></td>
						<td class="toFill" style="width: 80%"></td>
					</tr>
					<tr style="height: 80px;">
						<td><strong><%= _.capitalize(lang.observations) %>:</strong></td>
						<td class="toFill" style="width: 80%"></td>
					</tr>

				</table>

			</fieldset>
		</div>


		<div class="forInter">
			<h3 style="margin-bottom: 5px;"><%= lang.viewsTitles.tasksList %>:</h3>

				<table id="tableTasks" style="width: 100%; border: thin solid gray;">
					<thead>
						<tr>
							<td style="text-align: center"><strong><%= _.capitalize(lang.label) %></strong></td>
							<td style="text-align: center"><strong><%= _.capitalize(lang.estimatedHours) %></strong></td>
							<td style="text-align: center"><strong><%= _.capitalize(lang.carryOutBy) %></strong></td>
							<td style="text-align: center"><strong><%= _.capitalize(lang.dateHourStart) %></strong></td>
							<td style="text-align: center"><strong><%= _.capitalize(lang.dateHourEnd) %></strong></td>
							<td style="text-align: center"><strong><%= _.capitalize(lang.vehiclesOrEquipments) %></strong></td>
							<td style="text-align: center"><strong><%= _.capitalize(lang.oil) %> / <%= _.capitalize(lang.price) %></strong></td>
							<td style="text-align: center"><strong><%= _.capitalize(lang.observations) %>:</strong></td>
						</tr>
					</thead>
					
					<tbody>

					</tbody>
				</table>

		</div>

	</div>
</div>

<!-- Modal Form to add/update an inter -->
<div id="modalSaveInter" class="modal hide fade"></div>